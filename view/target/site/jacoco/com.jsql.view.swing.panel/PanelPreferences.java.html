<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PanelPreferences.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">view</a> &gt; <a href="index.source.html" class="el_package">com.jsql.view.swing.panel</a> &gt; <span class="el_source">PanelPreferences.java</span></div><h1>PanelPreferences.java</h1><pre class="source lang-java linenums">package com.jsql.view.swing.panel;

import com.jsql.view.swing.action.ActionCheckIP;
import com.jsql.view.swing.panel.preferences.*;
import com.jsql.view.swing.ui.FlatButtonMouseAdapter;
import com.jsql.view.swing.util.UiUtil;
import org.apache.commons.text.WordUtils;

import javax.swing.*;
import javax.swing.border.Border;
import java.awt.*;
import java.awt.event.ActionListener;

public class PanelPreferences extends JPanel {
    
<span class="fc" id="L16">    private final transient ActionListener actionListenerSave = new ActionListenerSave(this);</span>
    
<span class="fc" id="L18">    private final PanelTampering panelTamperingPreferences = new PanelTampering(this);</span>
<span class="fc" id="L19">    private final PanelInjection panelInjectionPreferences = new PanelInjection(this);</span>
<span class="fc" id="L20">    private final PanelProxy panelProxyPreferences = new PanelProxy(this);</span>
<span class="fc" id="L21">    private final PanelAuth panelAuthPreferences = new PanelAuth(this);</span>
<span class="fc" id="L22">    private final PanelGeneral panelGeneralPreferences = new PanelGeneral(this);</span>
<span class="fc" id="L23">    private final PanelUserAgent panelUserAgentPreferences = new PanelUserAgent();</span>
<span class="fc" id="L24">    private final PanelConnection panelConnectionPreferences = new PanelConnection(this);</span>
<span class="fc" id="L25">    private final PanelStrategies panelStrategiesPreferences = new PanelStrategies(this);</span>

<span class="fc" id="L27">    private static final JPanel panelInjection = new JPanel(new BorderLayout());</span>
<span class="fc" id="L28">    private static final JPanel panelAuth = new JPanel(new BorderLayout());</span>
<span class="fc" id="L29">    private static final JPanel panelProxy = new JPanel(new BorderLayout());</span>
<span class="fc" id="L30">    private static final JPanel panelGeneral = new JPanel(new BorderLayout());</span>
<span class="fc" id="L31">    private static final JPanel panelUserAgent = new JPanel(new BorderLayout());</span>
<span class="fc" id="L32">    private static final JPanel panelTampering = new JPanel(new BorderLayout());</span>
<span class="fc" id="L33">    private static final JPanel panelConnection = new JPanel(new BorderLayout());</span>
<span class="fc" id="L34">    private static final JPanel panelStrategies = new JPanel(new BorderLayout());</span>

<span class="fc" id="L36">    private final transient Border panelBorder = BorderFactory.createEmptyBorder(10, 15, 0, 15);</span>
    
<span class="fc" id="L38">    private enum CategoryPreference {</span>
        
<span class="fc" id="L40">        INJECTION(panelInjection),</span>
<span class="fc" id="L41">        TAMPERING(panelTampering),</span>
<span class="fc" id="L42">        CONNECTION(panelConnection),</span>
<span class="fc" id="L43">        STRATEGIES(panelStrategies),</span>
<span class="fc" id="L44">        AUTH(panelAuth),</span>
<span class="fc" id="L45">        USER_AGENT(panelUserAgent),</span>
<span class="fc" id="L46">        PROXY(panelProxy),</span>
<span class="fc" id="L47">        GENERAL(panelGeneral);</span>
        
        private final Component panel;

<span class="fc" id="L51">        CategoryPreference(Component panel) {</span>
<span class="fc" id="L52">            this.panel = panel;</span>
<span class="fc" id="L53">        }</span>
        
        @Override
        public String toString() {
<span class="fc" id="L57">            return &quot;  &quot;+ WordUtils.capitalizeFully(this.name()).replace('_', ' ') +&quot;  &quot;;</span>
        }

        public Component getPanel() {
<span class="fc" id="L61">            return this.panel;</span>
        }
    }
    
<span class="fc" id="L65">    public PanelPreferences() {</span>
        
<span class="fc" id="L67">        var borderLayoutPreferences = new BorderLayout();</span>
<span class="fc" id="L68">        this.setLayout(borderLayoutPreferences);</span>
<span class="fc" id="L69">        this.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));</span>
        
<span class="fc" id="L71">        JList&lt;CategoryPreference&gt; categories = this.getCategories(borderLayoutPreferences);</span>
        
<span class="fc" id="L73">        this.add(categories, BorderLayout.LINE_START);</span>
        
<span class="fc" id="L75">        panelInjection.setBorder(this.panelBorder);</span>
<span class="fc" id="L76">        panelInjection.add(new JLabel(&quot;&lt;html&gt;&lt;b&gt;Injection&lt;/b&gt; / Process configuration&lt;/html&gt;&quot;), BorderLayout.NORTH);</span>
<span class="fc" id="L77">        panelInjection.add(this.panelInjectionPreferences, BorderLayout.CENTER);</span>
        
<span class="fc" id="L79">        panelTampering.setBorder(this.panelBorder);</span>
<span class="fc" id="L80">        panelTampering.add(new JLabel(&quot;&lt;html&gt;&lt;b&gt;Tampering&lt;/b&gt; / SQL transform to bypass Web Application Firewall&lt;/html&gt;&quot;), BorderLayout.NORTH);</span>
<span class="fc" id="L81">        panelTampering.add(this.panelTamperingPreferences, BorderLayout.CENTER);</span>
        
<span class="fc" id="L83">        panelConnection.setBorder(this.panelBorder);</span>
<span class="fc" id="L84">        panelConnection.add(new JLabel(&quot;&lt;html&gt;&lt;b&gt;Connection&lt;/b&gt; / Network and threads&lt;/html&gt;&quot;), BorderLayout.NORTH);</span>
<span class="fc" id="L85">        panelConnection.add(this.panelConnectionPreferences, BorderLayout.CENTER);</span>
        
<span class="fc" id="L87">        panelStrategies.setBorder(this.panelBorder);</span>
<span class="fc" id="L88">        panelStrategies.add(new JLabel(&quot;&lt;html&gt;&lt;b&gt;Strategies&lt;/b&gt; / Reduce processing load&lt;/html&gt;&quot;), BorderLayout.NORTH);</span>
<span class="fc" id="L89">        panelStrategies.add(this.panelStrategiesPreferences, BorderLayout.CENTER);</span>

<span class="fc" id="L91">        panelAuth.setBorder(this.panelBorder);</span>
<span class="fc" id="L92">        panelAuth.add(new JLabel(&quot;&lt;html&gt;&lt;b&gt;Authentication&lt;/b&gt; / Basic, Digest, NTLM or Kerberos connection&lt;/html&gt;&quot;), BorderLayout.NORTH);</span>
<span class="fc" id="L93">        panelAuth.add(this.panelAuthPreferences, BorderLayout.CENTER);</span>
        
<span class="fc" id="L95">        panelUserAgent.setBorder(this.panelBorder);</span>
<span class="fc" id="L96">        panelUserAgent.add(new JLabel(&quot;&lt;html&gt;&lt;b&gt;User Agent&lt;/b&gt; / Network connection agents&lt;/html&gt;&quot;), BorderLayout.NORTH);</span>
<span class="fc" id="L97">        panelUserAgent.add(this.panelUserAgentPreferences, BorderLayout.CENTER);</span>
        
<span class="fc" id="L99">        this.initializePanelProxy();</span>
        
<span class="fc" id="L101">        panelGeneral.setBorder(this.panelBorder);</span>
<span class="fc" id="L102">        panelGeneral.add(new JLabel(&quot;&lt;html&gt;&lt;b&gt;General&lt;/b&gt; / Basic options&lt;/html&gt;&quot;), BorderLayout.NORTH);</span>
<span class="fc" id="L103">        panelGeneral.add(this.panelGeneralPreferences, BorderLayout.CENTER);</span>
        
<span class="fc" id="L105">        this.add(panelInjection, BorderLayout.CENTER);</span>
<span class="fc" id="L106">    }</span>

    private void initializePanelProxy() {
        
<span class="fc" id="L110">        panelProxy.setLayout(new BoxLayout(panelProxy, BoxLayout.Y_AXIS));</span>
<span class="fc" id="L111">        panelProxy.setBorder(this.panelBorder);</span>
        
<span class="fc" id="L113">        final var buttonCheckIp = new JButton(&quot;Check your IP&quot;);</span>
<span class="fc" id="L114">        buttonCheckIp.addActionListener(new ActionCheckIP());</span>
<span class="fc" id="L115">        buttonCheckIp.setToolTipText(</span>
            &quot;&lt;html&gt;&lt;b&gt;Verify what public IP address is used by jSQL&lt;/b&gt;&lt;br&gt;&quot;
            + &quot;Usually it's your own public IP if you don't use a proxy. If you use a proxy&lt;br&gt;&quot;
            + &quot;like TOR then your public IP is hidden and another one is used instead.&lt;/html&gt;&quot;
        );
<span class="fc" id="L120">        buttonCheckIp.setContentAreaFilled(true);</span>
<span class="fc" id="L121">        buttonCheckIp.setBorder(UiUtil.BORDER_ROUND_BLU);</span>
        
<span class="fc" id="L123">        var flatButtonMouseAdapter = new FlatButtonMouseAdapter(buttonCheckIp);</span>
<span class="fc" id="L124">        flatButtonMouseAdapter.setContentVisible(true);</span>
<span class="fc" id="L125">        buttonCheckIp.addMouseListener(flatButtonMouseAdapter);</span>
        
<span class="fc" id="L127">        var labelProxy = new JLabel(&quot;&lt;html&gt;&lt;b&gt;Proxy&lt;/b&gt; / Settings for tools like Burp and Tor&lt;/html&gt;&quot;);</span>
<span class="fc" id="L128">        panelProxy.removeAll();</span>
<span class="fc" id="L129">        panelProxy.add(labelProxy, BorderLayout.NORTH);</span>
<span class="fc" id="L130">        panelProxy.add(this.panelProxyPreferences);</span>
        
<span class="fc" id="L132">        var panelCheckIp = new JPanel(new FlowLayout(FlowLayout.LEADING, 0, 0));</span>
<span class="fc" id="L133">        panelCheckIp.setBorder(BorderFactory.createEmptyBorder(15, 0, 0, 0));</span>
<span class="fc" id="L134">        panelCheckIp.add(buttonCheckIp);</span>
<span class="fc" id="L135">        panelCheckIp.add(Box.createGlue());</span>
<span class="fc" id="L136">        panelProxy.add(panelCheckIp);</span>
        
<span class="fc" id="L138">        labelProxy.setAlignmentX(Component.LEFT_ALIGNMENT);</span>
<span class="fc" id="L139">        this.panelProxyPreferences.setAlignmentX(Component.LEFT_ALIGNMENT);</span>
<span class="fc" id="L140">        panelCheckIp.setAlignmentX(Component.LEFT_ALIGNMENT);</span>
<span class="fc" id="L141">    }</span>

    private JList&lt;CategoryPreference&gt; getCategories(BorderLayout borderLayoutPreferences) {
        
<span class="fc" id="L145">        JList&lt;CategoryPreference&gt; categories = new JList&lt;&gt;(CategoryPreference.values());</span>
<span class="fc" id="L146">        categories.setName(&quot;listCategoriesPreference&quot;);</span>
<span class="fc" id="L147">        categories.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);</span>
<span class="fc" id="L148">        categories.setSelectedIndex(0);</span>
        
<span class="fc" id="L150">        categories.setBorder(BorderFactory.createLineBorder(UiUtil.COLOR_COMPONENT_BORDER));</span>
<span class="fc" id="L151">        categories.addListSelectionListener(e -&gt; {</span>
            
<span class="fc" id="L153">            PanelPreferences.this.remove(borderLayoutPreferences.getLayoutComponent(BorderLayout.CENTER));</span>
<span class="fc" id="L154">            PanelPreferences.this.add(categories.getSelectedValue().getPanel(), BorderLayout.CENTER);</span>
            // Both required
<span class="fc" id="L156">            PanelPreferences.this.revalidate();</span>
<span class="fc" id="L157">            PanelPreferences.this.repaint();</span>
<span class="fc" id="L158">        });</span>
        
<span class="fc" id="L160">        categories.setCellRenderer(new DefaultListCellRenderer() {</span>

            @Override
            public Component getListCellRendererComponent(JList&lt;?&gt; list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
                
<span class="fc" id="L165">                JLabel labelItemList = (JLabel) super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);</span>
                
<span class="fc bfc" id="L167" title="All 2 branches covered.">                if (isSelected) {</span>
                    
<span class="fc" id="L169">                    labelItemList.setBackground(UiUtil.COLOR_FOCUS_GAINED);</span>
                    
                    // Hardcode color black for Mac uses white by default
<span class="fc" id="L172">                    labelItemList.setForeground(Color.BLACK);</span>
                }
                
<span class="fc" id="L175">                labelItemList.setBorder(</span>
<span class="fc" id="L176">                    BorderFactory.createCompoundBorder(</span>
<span class="fc" id="L177">                        BorderFactory.createMatteBorder(3, 3, 0, 3, Color.WHITE),</span>
<span class="fc bfc" id="L178" title="All 2 branches covered.">                        isSelected</span>
<span class="fc" id="L179">                        ? BorderFactory.createLineBorder(UiUtil.COLOR_COMPONENT_BORDER)</span>
<span class="fc" id="L180">                        : labelItemList.getBorder()</span>
                    )
                );
                
<span class="fc" id="L184">                return labelItemList;</span>
            }
        });
        
<span class="fc" id="L188">        return categories;</span>
    }
    
    
    // Getter and setter

    public PanelAuth getPanelAuth() {
<span class="fc" id="L195">        return this.panelAuthPreferences;</span>
    }

    public PanelProxy getPanelProxy() {
<span class="fc" id="L199">        return this.panelProxyPreferences;</span>
    }

    public PanelInjection getPanelInjection() {
<span class="fc" id="L203">        return this.panelInjectionPreferences;</span>
    }

    public PanelTampering getPanelTampering() {
<span class="fc" id="L207">        return this.panelTamperingPreferences;</span>
    }

    public PanelGeneral getPanelGeneral() {
<span class="fc" id="L211">        return this.panelGeneralPreferences;</span>
    }
    
    public PanelUserAgent getPanelUserAgent() {
<span class="nc" id="L215">        return this.panelUserAgentPreferences;</span>
    }
    
    public PanelConnection getPanelConnection() {
<span class="fc" id="L219">        return this.panelConnectionPreferences;</span>
    }

    public PanelStrategies getPanelStrategies() {
<span class="fc" id="L223">        return this.panelStrategiesPreferences;</span>
    }

    public ActionListener getActionListenerSave() {
<span class="fc" id="L227">        return this.actionListenerSave;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>